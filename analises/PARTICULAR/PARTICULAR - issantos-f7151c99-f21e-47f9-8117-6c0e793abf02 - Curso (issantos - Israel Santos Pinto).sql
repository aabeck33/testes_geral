SELECT C.FGENABLED, CT.IDGENTYPE, C.IDCOURSE, C.NMCOURSE, C.CDASSOC, C.CDCONTENTASSOC, C.FGCOURSETYPE, TCONF.IDCONFIGURATION, TCONF.NMCONFIGURATION, C.CDCOURSE, TCONF.CDCONFIGURATION, CT.NMGENTYPE, C.CDFAVORITE, CT.CDGENTYPE, CT.CDGENTYPE AS CDCOURSETYPE, CASE  WHEN C.FGCOURSETYPE=2  THEN (SELECT COALESCE(SUM(QTTMTOT), 0) AS SUMQTTMTOT FROM TRCOURSETRAIL TCT INNER JOIN TRCOURSE TC ON (TC.CDCOURSE=TCT.CDCOURSETRAIL) WHERE TCT.CDCOURSE=C.CDCOURSE)  ELSE C.QTTMTOT END QTTMTOT, CASE WHEN C.FGCOURSETYPE=2 THEN (SELECT CAST(COALESCE(SUM(QTTMTOT), 0) AS NUMERIC(19)) * 60000 AS SUMQTTMTOT FROM TRCOURSETRAIL TCT INNER JOIN TRCOURSE TC ON ( TC.CDCOURSE=TCT.CDCOURSETRAIL) WHERE TCT.CDCOURSE=C.CDCOURSE) ELSE CAST(C.QTTMTOT AS NUMERIC(19)) * 60000 END AS QTTMTOTANL, CASE  WHEN C.FGCOURSETYPE=2  THEN '#{217149}'  ELSE '#{102342}' END AS NMCOURSETYPE, CASE  WHEN TCONF.IDCONFIGURATION IS NOT NULL  THEN CAST(TCONF.IDCONFIGURATION + ' - ' + TCONF.NMCONFIGURATION AS VARCHAR(350))  ELSE NULL END AS IDNMCONFIGURATION, C.IDCOURSE + ' - ' + C.NMCOURSE AS IDNMCOURSE, CT.IDGENTYPE + ' - ' + CT.NMGENTYPE AS IDNMTYPECOURSE, C.CDCOURSE AS QTOPERATORFIELD, CASE  WHEN C.FGENABLED=2  THEN 'https://sesuite.uniaoquimica.com.br/se/v71240/common/images/generic_icons/16x16/invalido.png'  ELSE NULL END IMGENABLED, CASE  WHEN EXISTS (SELECT 1 FROM ADATTACHMENT ADA INNER JOIN TRCOURSEATTACH TRA ON (TRA.CDATTACHMENT=ADA.CDATTACHMENT) WHERE TRA.CDCOURSE=C.CDCOURSE)  THEN 1  ELSE 2 END FGATTACHMENT, CASE  WHEN EXISTS (SELECT 1 FROM DCDOCUMENT ADOC INNER JOIN GNASSOCDOCUMENT ASD ON (ADOC.CDDOCUMENT=ASD.CDDOCUMENT) WHERE C.CDASSOC=ASD.CDASSOC)  THEN 1  ELSE 2 END AS FGDOCUMENT FROM TRCOURSE C INNER JOIN GNGENTYPE CT ON (C.CDCOURSETYPE=CT.CDGENTYPE) LEFT OUTER JOIN TRCONFIGURATION TCONF ON (TCONF.CDCONFIGURATION=C.CDCONFIGURATION) WHERE 1=1 AND C.FGENABLED=1 AND CT.CDGENTYPE IN (<!%FUNC(com.softexpert.generic.parameter.InClauseBuilder, R05HRU5UWVBF, Q0RHRU5UWVBF, Q0RHRU5UWVBFT1dORVI=,, MTEw, Q1Q=)%>) AND (CT.CDTYPEROLE IS NULL OR EXISTS (SELECT NULL FROM (SELECT CHKUSRPERMTYPEROLE.CDTYPEROLE AS CDTYPEROLE, CHKUSRPERMTYPEROLE.CDUSER FROM (SELECT PM.FGPERMISSIONTYPE, PM.CDUSER, PM.CDTYPEROLE FROM GNUSERPERMTYPEROLE PM WHERE 1=1 AND PM.CDUSER <> -1 AND PM.CDPERMISSION=5 /* Nao retirar este comentario */UNION ALL SELECT PM.FGPERMISSIONTYPE, US.CDUSER AS CDUSER, PM.CDTYPEROLE FROM GNUSERPERMTYPEROLE PM CROSS JOIN ADUSER US WHERE 1=1 AND PM.CDUSER=-1 AND US.FGUSERENABLED=1 AND PM.CDPERMISSION=5) CHKUSRPERMTYPEROLE GROUP BY CHKUSRPERMTYPEROLE.CDTYPEROLE, CHKUSRPERMTYPEROLE.CDUSER HAVING MAX(CHKUSRPERMTYPEROLE.FGPERMISSIONTYPE)=1) CHKPERMTYPEROLE WHERE CHKPERMTYPEROLE.CDTYPEROLE=CT.CDTYPEROLE AND (CHKPERMTYPEROLE.CDUSER=15611 OR 15611=-1)))
